<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ú†Ø§Ù„Ø´ Ø§Ù„Ùˆ Ø°ØºØ§Ù„</title>
    <style>
        :root { --p: #ff4d00; --a: #ffae00; --s: #2ecc71; --glow: #39ff14; }
        body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; min-height: 100vh; font-family: Tahoma; overflow: hidden; user-select: none; }
        
        /* Ø§ØµÙ„Ø§Ø­ Ø³Ø§Ø®ØªØ§Ø± Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ø±Ø§Ø² Ø´Ø¯Ù† Ø¯Ø± ØªØ¨Ù„Øª Ùˆ Ø³ÛŒØ³ØªÙ… */
        #game { 
            width: 95vw; 
            height: 95vh; 
            max-width: 400px; 
            max-height: 700px; /* Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø§Ø±ØªÙØ§Ø¹ */
            background: radial-gradient(circle at top, #220000 0%, #050505 100%); 
            display: flex; 
            flex-direction: column; 
            padding: 15px; 
            box-sizing: border-box; 
            border-radius: 20px;
            border: 1px solid rgba(255,77,0,0.3);
            position: relative;
        }

        h3 { color: var(--a); text-align: center; margin: 5px 0; font-size: 16px; }
        .skip { display: block; text-align: center; text-decoration: none; color: #fff; background: rgba(255,77,0,0.1); border: 1px dashed var(--p); padding: 8px; margin: 10px auto; border-radius: 8px; font-size: 11px; width: 90%; animation: pulse 2s infinite; font-weight: bold; }
        @keyframes pulse { 0%,100% {opacity:1} 50% {opacity:0.5} }
        
        .stats { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.05); padding: 10px; border-radius: 12px; }
        .stat-box { display: flex; flex-direction: column; align-items: center; color: #fff; }
        .stat-v { font-weight: bold; font-size: 16px; }
        #tm { color: var(--p); font-size: 20px; transition: 0.2s; }
        .penalty-text { color: #ff0000 !important; transform: scale(1.4); text-shadow: 0 0 15px red; }

        /* ØªÙ†Ø¸ÛŒÙ… Ø¬Ø¯ÙˆÙ„ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø±Ø¨Ø¹ÛŒ Ùˆ ÙÛŒÚ©Ø³ */
        #grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            grid-template-rows: repeat(4, 1fr); 
            gap: 8px; 
            flex-grow: 1;
            margin-bottom: 10px;
        }

        .card { position: relative; cursor: pointer; perspective: 1000px; width: 100%; height: 100%; }
        .card-in { position: relative; width: 100%; height: 100%; transition: transform 0.3s; transform-style: preserve-3d; }
        .card.flip .card-in { transform: rotateY(180deg); }
        .face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 11px; font-weight: bold; border: 1px solid rgba(255,255,255,0.1); }
        .back { background: #1a1a1a; color: var(--p); font-size: 18px; }
        .front { background: #fff; color: #000; transform: rotateY(180deg); border: 1px solid var(--p); text-align: center; padding: 4px; box-sizing: border-box; }
        
        .match .front { 
            background: var(--s) !important; 
            color: #fff !important; 
            border-color: var(--glow);
            box-shadow: 0 0 20px var(--glow); 
            animation: successGlow 0.5s ease-out;
        }

        @keyframes successGlow {
            0% { transform: rotateY(180deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.1); }
            100% { transform: rotateY(180deg) scale(1); }
        }

        #ov { display: none; position: absolute; inset: 0; background: rgba(0,0,0,0.95); z-index: 10; flex-direction: column; align-items: center; justify-content: center; color: white; border-radius: 20px; }
        .btn { background: var(--p); color: white; border: none; padding: 12px 25px; border-radius: 25px; font-weight: bold; margin-top: 15px; text-decoration: none; cursor: pointer; font-family: Tahoma; }
    </style>
</head>
<body>

<div id="game">
    <h3>ğŸ”¥ Ú†Ø§Ù„Ø´ Ø§Ù„Ùˆ Ø°ØºØ§Ù„  Ø¨Ø§ Û³ Ú©ÛŒØ³Ù‡ Ø¬Ø§ÛŒØ²Ù‡ğŸ”¥</h3>
    <a href="https://aloozoghal-hash.github.io/alozoghal/" class="skip">ğŸ¤šÙ†ÙØªØ±Ù… Ø³Ø®ØªÙ‡ ÙˆÙ„Ø´ Ú©Ù† ÛŒØ§Ù… Ø°ØºØ§Ù„ Ø§ÙØ³ÙˆÙ†Ù…ğŸ¤š</a>
    <div class="stats">
        <div class="stat-box"><span style="font-size:10px">Ø²Ù…Ø§Ù†</span><span id="tm" class="stat-v">30</span></div>
        <div id="msg" style="color:var(--a); font-size:11px; align-self:center;">Ø¢Ù…Ø§Ø¯Ù‡ØŸ</div>
        <div class="stat-box"><span style="font-size:10px">Ø§Ù…ØªÛŒØ§Ø²</span><span id="sc" class="stat-v">1000</span></div>
    </div>
    <div id="grid"></div>
    <div id="ov">
        <h2 id="final-msg"></h2>
        <div id="reward" style="display:none"><a id="wa" href="#" target="_blank" class="btn" style="background:#25D366">ğŸ“± Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø§ÛŒØ²Ù‡</a></div>
        <button onclick="init()" class="btn">Ø¯ÙˆØ¨Ø§Ø±Ù‡ ğŸ”„</button>
    </div>
</div>

<script>
(function() {
    const locs = ['Ø§Ø´Ú©ÙØª Ø³Ù„Ù…Ø§Ù†','Ú©ÙˆÙ„ÙØ±Ø­','Ø³ÙˆØ³Ù†','Ø¯Ù‡Ø¯Ø²','Ø­Ø§ÙØ¸ Ø¬Ù†ÙˆØ¨ÛŒ','ÙÙ„Ú©Ù‡ Ø§ØµÙ„ÛŒ','Ø³Ø±Ù‚Ù†Ø§Øª','Ø§ÛŒØ°Ù‡'];
    let data=[], flipped=[], matched=0, score=1000, time=30, lock=true, timer;

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playSound(type) {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain); gain.connect(audioCtx.destination);
        if(type === 'match') {
            osc.frequency.setValueAtTime(440, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
        } else if(type === 'error') {
            osc.frequency.setValueAtTime(120, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
        } else if(type === 'flip') {
            osc.frequency.setValueAtTime(400, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
        }
        osc.start(); osc.stop(audioCtx.currentTime + 0.2);
    }

    window.init = () => {
        clearInterval(timer);
        matched=0; score=1000; time=30; flipped=[]; lock=true;
        document.getElementById('tm').innerText = time;
        document.getElementById('sc').innerText = score;
        document.getElementById('ov').style.display = 'none';
        document.getElementById('msg').innerText = "Ø­ÙØ¸ Ú©Ù†...";
        
        data = [...locs, ...locs].sort(() => Math.random() - 0.5);
        const grid = document.getElementById('grid');
        grid.innerHTML = data.map((txt, i) => `
            <div class="card flip" id="card-${i}" onclick="flip(this,${i})">
                <div class="card-in">
                    <div class="face back">ØŸ</div>
                    <div class="face front">${txt}</div>
                </div>
            </div>`).join('');

        setTimeout(() => {
            document.querySelectorAll('.card').forEach(c => c.classList.remove('flip'));
            lock = false; startTimer();
            document.getElementById('msg').innerText = "Ø´Ø±ÙˆØ¹!";
        }, 800);
    };

    function startTimer() {
        timer = setInterval(() => {
            time--;
            document.getElementById('tm').innerText = Math.max(0, time);
            if(time <= 0) end(false);
        }, 1000);
    }

    window.flip = (el, i) => {
        if(lock || el.classList.contains('flip') || el.classList.contains('match')) return;
        playSound('flip');
        el.classList.add('flip');
        flipped.push({el, txt: data[i]});
        
        if(flipped.length === 2) {
            lock = true;
            if(flipped[0].txt === flipped[1].txt) {
                matched++; score += 150;
                playSound('match');
                flipped.forEach(f => f.el.classList.add('match'));
                flipped = []; lock = false;
                document.getElementById('sc').innerText = score;
                if(matched === locs.length) end(true);
            } else {
                time = Math.max(0, time - 4);
                score = Math.max(0, score - 80);
                playSound('error');
                const tmEl = document.getElementById('tm');
                tmEl.classList.add('penalty-text');
                document.getElementById('tm').innerText = time;
                document.getElementById('sc').innerText = score;
                setTimeout(() => {
                    flipped.forEach(f => f.el.classList.remove('flip'));
                    flipped = []; lock = false;
                    tmEl.classList.remove('penalty-text');
                }, 400);
            }
        }
    };

    function end(win) {
        clearInterval(timer);
        document.getElementById('ov').style.display = 'flex';
        document.getElementById('final-msg').innerText = win ? "ğŸ† Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒ!" : "âŒ› Ø²Ù…Ø§Ù† ØªÙ…Ø§Ù… Ø´Ø¯";
        if(win) {
            document.getElementById('reward').style.display = 'block';
            document.getElementById('wa').href = `https://wa.me/989220730628?text=Ú†Ø§Ù„Ø´ Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø±Ùˆ Ø¨Ø§ Ø§Ù…ØªÛŒØ§Ø² ${score} Ø¨Ø±Ø¯Ù…!`;
        }
    }
    init();
})();
</script>
</body>
</html>
